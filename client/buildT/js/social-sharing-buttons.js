window.SocialButtons={},SocialButtons.services={facebook:{title:"Share",counterUrl:"//graph.facebook.com/?id={url}",popupUrl:"https://www.facebook.com/sharer/sharer.php?u={url}",count:"shares",width:600,height:500},twitter:{title:"Tweet",counterUrl:"//cdn.api.twitter.com/1/urls/count.json?url={url}&callback={cb}",popupUrl:"https://twitter.com/intent/tweet?url={url}&text={title}",width:600,height:450},pinterest:{title:"Pin it",counterUrl:"//api.pinterest.com/v1/urls/count.json?url={url}&callback={cb}",popupUrl:"https://pinterest.com/pin/create/button/?url={url}&description={title}",width:630,height:270},mailru:{counterUrl:"//connect.mail.ru/share_count?url_list={url}&callback=1&func={cb}",popupUrl:"http://connect.mail.ru/share?share_url={url}&title={title}",count:"shares",width:550,height:360},gplus:{title:"Share",counterUrl:"//share.yandex.ru/gpp.xml?url={url}",popupUrl:"https://plus.google.com/share?url={url}",count:function(t){window.services||(window.services={}),window.services.gplus={cb:function(e){t(e)}}},width:500,height:500},odnoklassniki:{title:"Share",counterUrl:"//connect.ok.ru/dk?st.cmd=extLike&ref={url}&uid={index}",popupUrl:"http://connect.ok.ru/dk?st.cmd=WidgetSharePreview&service=odnoklassniki&st.shareUrl={url}",count:function(t){window.ODKL||(window.ODKL={}),window.ODKL.updateCount=function(e,n){t(n)}},width:550,height:360},vkontakte:{title:"Share",counterUrl:"//vk.com/share.php?act=count&url={url}",popupUrl:"http://vk.com/share.php?url={url}&title={title}",count:function(t){window.VK||(window.VK={}),window.VK.Share={count:function(e,n){t(n)}}},width:550,height:330}},SocialButtons.CB={},SocialButtons.JS=function(t){var e=document.createElement("script");e.src=t,document.body.appendChild(e)},SocialButtons.JSONP=function(t,e,n){var o=String(Math.random()).slice(-6),i=!1;SocialButtons.CB["cb"+o]=function(t){i=!0,delete SocialButtons.CB[o],e(t)};var c=function(){i||(delete SocialButtons.CB[o],n(t))},r=document.createElement("script");r.onload=r.onerror=c,r.src=SocialButtons.template(t,{cb:"SocialButtons.CB.cb"+o})+"&",document.body.appendChild(r)},SocialButtons.JSON=function(t,e,n){var o=new XMLHttpRequest;o.open("GET",t,!0),o.onreadystatechange=function(){4==o.readyState&&(200==o.status?e(JSON.parse(o.responseText)):n&&n(o))},o.send()},SocialButtons.getCount=function(t,e,n){var o="https:"===location.protocol?"https:":"http:",i=this.template(o+this.services[t.name].counterUrl,t.option);"function"==typeof this.services[t.name].count?(this.JS(i),this.services[t.name].count(e)):this[/\{cb\}/.test(i)?"JSONP":"JSON"](i,function(n){e(n[SocialButtons.services[t.name].count||"count"])},n)},SocialButtons.template=function(t,e){return t.replace(/\{([^\}]+)\}/g,function(t,n){return e[n]||t})},SocialButtons.openPoup=function(t,e){var n=Math.round(screen.width/2-e.width/2),o=screen.height>e.height?Math.round(screen.height/3-e.height/2):0,i=window.open(t,"-","left="+n+",top="+o+",width="+e.width+",height="+e.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1");i?i.focus():location.href=t},SocialButtons.init=function(){for(var t=document.querySelector(".social-buttons"),e=document.querySelectorAll(".social-buttons>div"),n=0;n<e.length;n++){var o={};o.name=e[n].className,o.btn=e[n],o.option={url:e[n].getAttribute("data-url")||t.getAttribute("data-url")||window.location.href,title:e[n].getAttribute("data-title")||t.getAttribute("data-title")||document.title,media:e[n].getAttribute("data-media")||t.getAttribute("data-media")||"",start:e[n].getAttribute("data-start")||0},o.icon=document.createElement("span"),o.icon.classList.add("icon"),o.title=document.createElement("span"),o.title.classList.add("title"),o.title.innerText=e[n].innerText||this.services[o.name].title,o.count=document.createElement("span"),o.count.classList.add("count"),o.btn.innerHTML="",o.btn.appendChild(o.icon),o.btn.appendChild(o.title),o.btn.appendChild(o.count),o.btn.addEventListener("click",function(){SocialButtons.openPoup(SocialButtons.template(SocialButtons.services[this.name].popupUrl,this.option),SocialButtons.services[this.name])}.bind(o),!1),this.getCount(o,function(t){t=parseInt(t)||this.option.start,t?this.count.innerText=t:this.count.parentNode.removeChild(this.count)}.bind(o),function(){this.count.parentNode.removeChild(this.count)}.bind(o))}},"complete"==document.readyState&&SocialButtons.init(),document.addEventListener("DOMContentLoaded",function(){SocialButtons.init()});
//# sourceMappingURL=social-sharing-buttons.js.map
