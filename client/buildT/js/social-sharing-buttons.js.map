{"version":3,"sources":["social-sharing-buttons.js"],"names":["window","SocialButtons","services","facebook","title","counterUrl","popupUrl","count","width","height","twitter","pinterest","mailru","gplus","cb","odnoklassniki","ODKL","updateCount","id","vkontakte","VK","Share","CB","JS","url","script","document","createElement","src","body","appendChild","JSONP","callback","error","callbackName","String","Math","random","slice","scriptOk","data","checkCallback","onload","onerror","template","JSON","xhr","XMLHttpRequest","open","onreadystatechange","readyState","status","parse","responseText","send","getCount","el","protocol","location","this","name","option","test","str","obj","replace","m","k","openPoup","opt","left","round","screen","top","win","focus","href","init","container","querySelector","btns","querySelectorAll","i","length","className","btn","getAttribute","media","start","icon","classList","add","innerText","innerHTML","addEventListener","bind","parseInt","parentNode","removeChild"],"mappings":"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","file":"social-sharing-buttons.js","sourcesContent":["window.SocialButtons = {};\n\nSocialButtons.services = {\n\t'facebook': {\n\t\ttitle: 'Share', \n\t\tcounterUrl: '//graph.facebook.com/?id={url}',\n\t\tpopupUrl: 'https://www.facebook.com/sharer/sharer.php?u={url}',\n\t\tcount: 'shares',\n\t\twidth: 600, height: 500\n\t},\n\t'twitter': {\n\t\ttitle: 'Tweet',\n\t\tcounterUrl: '//cdn.api.twitter.com/1/urls/count.json?url={url}&callback={cb}',\n\t\tpopupUrl: 'https://twitter.com/intent/tweet?url={url}&text={title}',\n\t\twidth: 600, height: 450\n\t},\n\t'pinterest': {\n\t\ttitle: 'Pin it',\n\t\tcounterUrl: '//api.pinterest.com/v1/urls/count.json?url={url}&callback={cb}',\n\t\tpopupUrl: 'https://pinterest.com/pin/create/button/?url={url}&description={title}',\n\t\twidth: 630, height: 270\n\t},\n\t'mailru': {\n\t\tcounterUrl: '//connect.mail.ru/share_count?url_list={url}&callback=1&func={cb}',\n\t\tpopupUrl: 'http://connect.mail.ru/share?share_url={url}&title={title}',\n\t\tcount: 'shares',\n\t\twidth: 550, height: 360\n\t},\n\t'gplus': {\n\t\ttitle: 'Share',\n\t\tcounterUrl: '//share.yandex.ru/gpp.xml?url={url}',\n\t\tpopupUrl: 'https://plus.google.com/share?url={url}',\n\t\tcount: function(cb){\n\t\t\tif (!window.services) window.services = {};\n\t\t\twindow.services.gplus = {\n\t\t\t\tcb: function(count) {\n\t\t\t\t\tcb(count);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\twidth: 500, height: 500\n\t},\n\t'odnoklassniki': {\n\t\ttitle: 'Share',\n\t\tcounterUrl: '//connect.ok.ru/dk?st.cmd=extLike&ref={url}&uid={index}',\n\t\tpopupUrl: 'http://connect.ok.ru/dk?st.cmd=WidgetSharePreview&service=odnoklassniki&st.shareUrl={url}',\n\t\tcount: function(cb){\n\t\t\tif (!window.ODKL) window.ODKL = {};\n\t\t\twindow.ODKL.updateCount = function(id, count) {\n\t\t\t\tcb(count);\n\t\t\t};\n\t\t},\n\t\twidth: 550, height: 360\n\n\t},\n\t'vkontakte': {\n\t\ttitle: 'Share',\n\t\tcounterUrl: '//vk.com/share.php?act=count&url={url}',\n\t\tpopupUrl: 'http://vk.com/share.php?url={url}&title={title}',\n\t\tcount: function(cb){\n\t\t\tif (!window.VK) window.VK = {};\n\t\t\twindow.VK.Share = {\n\t\t\t\tcount: function(id, count) {\n\t\t\t\t\tcb(count);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\twidth: 550, height: 330\n\t}\n};\n\nSocialButtons.CB = {};\n\nSocialButtons.JS = function(url) {\n\tvar script = document.createElement('script');\n\tscript.src = url;\n\tdocument.body.appendChild(script);\n};\n\n\nSocialButtons.JSONP = function(url, callback, error) {\n\tvar callbackName = String(Math.random()).slice(-6);\n\tvar scriptOk = false;\n\n\tSocialButtons.CB['cb'+callbackName] = function(data) {\n\t\tscriptOk = true;\n\t\tdelete SocialButtons.CB[callbackName]; \n\t\tcallback(data);\n\t};\n\n\tvar checkCallback = function() {\n\t\tif (scriptOk) return;\n\t\tdelete SocialButtons.CB[callbackName];\n\t\terror(url);\n\t};\n\n\tvar script = document.createElement('script');\n\tscript.onload = script.onerror = checkCallback;\n\tscript.src = SocialButtons.template(url, {cb: 'SocialButtons.CB.cb' + callbackName})+'&';\n\tdocument.body.appendChild(script);\n};\n\n\nSocialButtons.JSON = function(url, callback, error) {\n\tvar xhr = new XMLHttpRequest();\n\txhr.open('GET', url, true);\n\txhr.onreadystatechange = function() {\n\t\tif (xhr.readyState != 4) return;\n\t\tif (xhr.status == 200) {\n\t\t\tcallback(JSON.parse(xhr.responseText));\n\t\t} else {\n\t\t\tif (error) error(xhr);\n\t\t}\n\t};\n\txhr.send();\n};\n\nSocialButtons.getCount = function(el, callback, error) {\n\tvar protocol = location.protocol === 'https:' ? 'https:' : 'http:'; \n\n\tvar url = this.template(protocol + this.services[el.name].counterUrl, el.option);\n\n\tif(typeof this.services[el.name].count == 'function') {\n\t\tthis.JS(url);\n\t\tthis.services[el.name].count(callback);\n\t} else {\n\t\tthis[/\\{cb\\}/.test(url)? 'JSONP' : 'JSON'](url, function(data) {\n\t\t\tcallback(data[SocialButtons.services[el.name].count || 'count']);\n\t\t}, error);\n\t}\n};\n\nSocialButtons.template = function(str, obj) {\n\treturn str.replace(/\\{([^\\}]+)\\}/g, function(m, k) {\n\t\treturn obj[k] || m;\n\t});\n};\n\nSocialButtons.openPoup = function(url, opt) {\n\tvar left = Math.round(screen.width/2 - opt.width/2);\n\tvar top = screen.height > opt.height? Math.round(screen.height/3 - opt.height/2) : 0;\n\n\tvar win = window.open(url, '-',\n\t\t'left=' + left +\n\t\t',top=' + top +\n\t\t',width=' + opt.width +\n\t\t',height=' + opt.height +\n\t\t',personalbar=0,toolbar=0,scrollbars=1,resizable=1'\n\t);\n\n\tif (win) {\n\t\twin.focus();\n\t} else {\n\t\tlocation.href = url;\n\t}\n};\n\nSocialButtons.init = function() {\n\tvar container = document.querySelector('.social-buttons');\n\tvar btns = document.querySelectorAll('.social-buttons>div');\n\n\tfor (var i = 0; i < btns.length; i++) {\n\n\t\tvar el = {};\n\t\tel.name = btns[i].className;\n\t\tel.btn = btns[i];\n\n\t\tel.option = {\n\t\t\turl: btns[i].getAttribute('data-url') || container.getAttribute('data-url') || window.location.href,\n\t\t\ttitle: btns[i].getAttribute('data-title') || container.getAttribute('data-title') || document.title,\n\t\t\tmedia: btns[i].getAttribute('data-media') || container.getAttribute('data-media') || '',\n\t\t\tstart: btns[i].getAttribute('data-start') || 0\n\t\t};\n\n\t\tel.icon  = document.createElement('span');\n\t\tel.icon.classList.add('icon');\n\n\t\tel.title = document.createElement('span');\n\t\tel.title.classList.add('title');\n\t\tel.title.innerText = btns[i].innerText || this.services[el.name].title;\n\n\t\tel.count = document.createElement('span');\n\t\tel.count.classList.add('count');\n\n\t\tel.btn.innerHTML = '';\n\t\tel.btn.appendChild(el.icon);\n\t\tel.btn.appendChild(el.title);\n\t\tel.btn.appendChild(el.count);\n\n\t\tel.btn.addEventListener('click', function() {\n\t\t\tSocialButtons.openPoup(SocialButtons.template(SocialButtons.services[this.name].popupUrl, this.option), SocialButtons.services[this.name]);\n\t\t}.bind(el), false);\n\n\t\tthis.getCount(el, function(count) {\n\t\t\tcount = parseInt(count) || this.option.start;\n\t\t\tif(count) {\n\t\t\t\tthis.count.innerText = count;\n\t\t\t}else{\n\t\t\t\tthis.count.parentNode.removeChild(this.count);\n\t\t\t}\n\t\t}.bind(el), function() {\n\t\t\tthis.count.parentNode.removeChild(this.count);\n\t\t}.bind(el));\n\t}\n};\n\nif(document.readyState=='complete') {\n\tSocialButtons.init();\n}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\tSocialButtons.init();\n});"]}